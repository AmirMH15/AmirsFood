<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Checkout</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
  </head>

  <!-- p.s. i HATE coding. this took me ages to figure out and change sum stuff smh Mr. Foster -->
  <body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
      <a class="navbar-brand" href="#">Navbar</a>
      <button
        class="navbar-toggler"
        type="button"
        data-toggle="collapse"
        data-target="#navbarNav"
        aria-controls="navbarNav"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ml-auto">
          <li class="nav-item">
            <a class="nav-link" href="index.html">Products</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="checkout.html">Checkout</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="confirmation.html">Confirmation</a>
          </li>
        </ul>
      </div>
    </nav>

    <div class="container mt-5">
      <h1>✨𝓒𝓱𝓮𝓬𝓴𝓸𝓾𝓽✨</h1>
      <hr>
      <!-- this just Displays Cart Items (with Prices) -->
      <div id="cart-items">
        <h2>Your Cart😆</h2>
        <div id="cart-list"></div>
        <hr>

        <!-- uh idk, just ubtotal, Tax, Total code yk -->
        <div id="cart-summary">
          <h4>Summary</h4>
          <h6>(Lets see how much money you're about to waste👀)</h6>
          <hr>
          <p id="subtotal">Subtotal: $0.00</p>
          <p id="tax">Tax (15%): $0.00</p>
          <h3 id="total">Total: $0.00</h3>
        </div>
      </div>

      <hr>

      <!-- this is the Shipping Address Form liek their information when theyre gonnna purchase -->
      <h3>🚗 𝓢𝓱𝓲𝓹𝓹𝓲𝓷𝓰 𝓐𝓭𝓭𝓻𝓮𝓼𝓼🛩️</h3>
      <form id="shipping-form">
        <div class="mb-3">
          <label for="name" class="form-label">Full Name <span style="color: red;">*</span></label>
          <input type="text" class="form-control" id="name" required />
        </div>
        <div class="mb-3">
          <label for="address" class="form-label">Address <span style="color: red;">*</span></label>
          <input type="text" class="form-control" id="address" required />
        </div>
        <div class="mb-3">
          <label for="apartment" class="form-label">Apartment (optional)</label>
          <input type="text" class="form-control" id="apartment" />
        </div>
        <div class="mb-3">
          <label for="city" class="form-label">City <span style="color: red;">*</span></label>
          <input type="text" class="form-control" id="city" required />
           </div>
        <div class="mb-3">
          <label for="state" class="form-label">State <span style="color: red;">*</span></label>
          <select class="form-control" id="state" required>
           <option value="">Select a State</option>
            <option value="AL">Alabama</option>
            <option value="AK">Alaska</option>
            <option value="AZ">Arizona</option>
            <option value="AR">Arkansas</option>
            <option value="CA">California</option>
            <option value="CO">Colorado</option>
            <option value="CT">Connecticut</option>
            <option value="DE">Delaware</option>
            <option value="FL">Florida</option>
            <option value="GA">Georgia</option>
            <option value="HI">Hawaii</option>
            <option value="ID">Idaho</option>
            <option value="IL">Illinois</option>
            <option value="IN">Indiana</option>
            <option value="IA">Iowa</option>
            <option value="KS">Kansas</option>
            <option value="KY">Kentucky</option>
            <option value="LA">Louisiana</option>
            <option value="ME">Maine</option>
            <option value="MD">Maryland</option>
            <option value="MA">Massachusetts</option>
            <option value="MI">Michigan</option>
            <option value="MN">Minnesota</option>
            <option value="MS">Mississippi</option>
            <option value="MO">Missouri</option>
            <option value="MT">Montana</option>
            <option value="NE">Nebraska</option>
            <option value="NV">Nevada</option>
            <option value="NH">New Hampshire</option>
            <option value="NJ">New Jersey</option>
            <option value="NM">New Mexico</option>
            <option value="NY">New York</option>
            <option value="NC">North Carolina</option>
            <option value="ND">North Dakota</option>
            <option value="OH">Ohio</option>
            <option value="OK">Oklahoma</option>
            <option value="OR">Oregon</option>
            <option value="PA">Pennsylvania</option>
            <option value="RI">Rhode Island</option>
            <option value="SC">South Carolina</option>
            <option value="SD">South Dakota</option>
            <option value="TN">Tennessee</option>
            <option value="TX">Texas</option>
            <option value="UT">Utah</option>
            <option value="VT">Vermont</option>
            <option value="VA">Virginia</option>
            <option value="WA">Washington</option>
            <option value="WV">West Virginia</option>
            <option value="WI">Wisconsin</option>
            <option value="WY">Wyoming</option>
          </select>
        </div>
        <div class="mb-3">
          <label for="zip" class="form-label">Zip Code <span style="color: red;">*</span></label>
          <input type="text" class="form-control" id="zip" required />          
        </div>
        <button type="submit" class="btn btn-primary">Submit Order</button>
      </form>
    </div>

    <footer class="bg-light text-center py-3">
      <p>&copy; 2025 E-commerce Website. All rights reserved.</p>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const cart = JSON.parse(localStorage.getItem("cart")) || [];
        const cartList = document.getElementById("cart-list");
        const subtotalElem = document.getElementById("subtotal");
        const taxElem = document.getElementById("tax");
        const totalElem = document.getElementById("total");

        let subtotal = 0;
        let cartHTML = '';

        // This will Loop through cart items to generate HTML
        cart.forEach((item) => {
          cartHTML += `
            <div class="cart-item">
              <h5>${item.name}</h5>
              <p>$${item.price}</p>
            </div>
          `;
          subtotal += parseFloat(item.price);
        });

        cartList.innerHTML = cartHTML;

        // This thinga ma chig is for it to Calculate Tax and Total
        const tax = subtotal * 0.15;
        const total = subtotal + tax;

        subtotalElem.innerHTML = `Subtotal: $${subtotal.toFixed(2)}`;
        taxElem.innerHTML = `Tax (15%): $${tax.toFixed(2)}`;
        totalElem.innerHTML = `Total: $${total.toFixed(2)}`;

        // this is just the Shipping Form Submit
        document.getElementById("shipping-form").addEventListener("submit", function (event) {
          event.preventDefault();

          // This chunk of code helps me... well the CODE, Collect the form data
          const name = document.getElementById("name").value;
          const address = document.getElementById("address").value;
          const apartment = document.getElementById("apartment").value;
          const city = document.getElementById("city").value;
          const state = document.getElementById("state").value;
          const zip = document.getElementById("zip").value;

          // Since your code was faulty i had to do this, which this code just Prepares the order summary and then redirects it to the confirmation page
          const orderData = new URLSearchParams();
          cart.forEach((item, index) => {
            orderData.append("id", item.id);
            orderData.append("name", item.name);
            orderData.append("price", item.price);
          });
          orderData.append("name", name);
          orderData.append("address", address);
          orderData.append("apartment", apartment);
          orderData.append("city", city);
          orderData.append("state", state);
          orderData.append("zip", zip);
// BIG AHHH CODE!!
//if only your code wasn't faulty and ruined my night. you do know its late at night and you got me here CODING. smh 
          window.location.href = `confirmation.html?${orderData.toString()}`;
        });
      });
    </script>
  </body>
</html>
